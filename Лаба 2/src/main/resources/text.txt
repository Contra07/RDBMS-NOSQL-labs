1. Предметная область в PlantUML
2. Показать CREATE TABLE - первичный ключ в order by, движок MergeTree
3. Для подключения использовался Spring JDBC и официальный драйвер
4. Продемонстрируем CRUD
    4.1 Показать текущие данные во всех таблицах (list)
        people list
        stats list
        habits list
    4.2 Продемонстрировать добавление 
        people new      - ключ генерируется на уровне приложения.
    4.3 Продемонстрировать изменение. Указать на ALTER TABLE.
        people edit     - Указать на ALTER TABLE
                        - Происходит моментально, но мутации можно посмотреть в system.mutations (query.sql)
    4.4 Продемонстрировать удаление. Указать на ALTER TABLE. Указать на каскадное удаление (list других таблиц).
        people delete   - Указать на ALTER TABLE
                        - Указать на каскадное удаление (list других таблиц).
                        - Происходит моментально, но мутации можно посмотреть в system.mutations (query.sql)
5. Продемонстрируем CollapsingMergeTree
    5.1 Показать CREATE TABLE - знак sign, движок CollapsingMergeTree
    5.2 Показать текущие данные (list)
    5.4 Продемонстрировать удаление
        5.4.1 delete --collapsing   - требует такой же первичный ключ (id) и противоположный знак (sign) 
                                    - SELECT под INSERT INTO нужен, чтобы не спамить удалением несуществующей записи.
        5.4.2 list                  - указать на разный знак
        5.4.3 list --final          - merge происходит на уровне запроса
        5.4.4 list --collapsing     - может гарантировать только id и агрегированные функции из-за group by
    5.5 Продемонстрировать изменение
        5.5.1 edit --collapsing     - SELECT FINAL для получения сущности
                                    - Первый запрос на удаление, второй на добавление. В одном INSERT сразу происходит Collapse записей с разным Sign. Можно только через VALUES.
        5.4.2 list                  - указать на две новые записи с разным знаком
        5.4.3 list --final          - merge происходит на уровне запроса
        5.4.4 list --collapsing     - ничего, потому что не редачили первичный ключ
    5.6 Продемонстрировать optimize - запустит все merge
    5.7 Показать данные обычным list
6. Продемонстрируем ReplacingMergeTree
    6.1 Показать CREATE TABLE - версию version и метку delete, движок ReplacingMergeTree
    6.2 Показать текущие данные (list)
    6.4 Продемонстрировать удаление
        6.4.1 delete --replacing    - требует такой же первичный ключ (id), версия выше (version) и метка (delete) 
                                    - maxVersion для получения текущей версии
                                    - и проверка что ещё не удалили dr.deleted = 0
        6.4.2 list                  - указать на версию и метку
        6.4.3 list --final          - merge происходит на уровне запроса
        6.4.4 list --replacing      - с использованием подзапроса, но можем выбрать точную запись в отличии от collapsing
    6.5 Продемонстрировать изменение
        6.5.1 edit --replacing      - SELECT FINAL для получения сущности
                                    - insert с версией (maxVersion) на один больше
        6.4.2 list                  - указать на одну новую запись другой версией
              list show --id  
        6.4.3 list --final          - merge происходит на уровне запроса
        6.4.4 list --replacing      - с использованием подзапроса, но можем выбрать точную запись в отличии от collapsing
    6.6 Продемонстрировать optimize - запустит все merge
    6.7 Показать просто данные list - последняя удаленная запись останется для порядка версий
7. Продемонстрируем JOIN
    7.1 INNER JOIN
        habits sleep
    7.2 LEFT JOIN
        habits sleep --year 2024    - left с demographics, чтобы учесть все профессии
    7.3 RIGHT JOIN
        stats average               - right join статистики на опрошенных, у кого 0 - не ещё не проходил    
                                    опрос на уровень страса и т.д.
    7.4 FULL JOIN
        stats compare --id 1 --first_year 2020 --second_year 2021
                                    - full join месяцев двух годов, у кого 0 - в этот месяц опрос не проходил
    7.5 CROSS JOIN
        habits average --id 2       - cross join опрошенных и всех годов, которые длился опрос, у кого 0 - в этом году не проходил опрос
